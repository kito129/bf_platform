<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>betfairplatform documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">betfairplatform documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li >LadderResume</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/model/calculator/ladder.ts</code>
        </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#avgOddsBack" >avgOddsBack</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#avgOddsLay" >avgOddsLay</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#breakEvenOdds" >breakEvenOdds</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#commission" >commission</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#netBack" >netBack</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#netLay" >netLay</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#rating" >rating</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#totalBackStake" >totalBackStake</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#totalCommission" >totalCommission</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#totalLayBank" >totalLayBank</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#totalLayLiability" >totalLayLiability</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#totalToWinBack" >totalToWinBack</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Optional</span>
                                <a href="#totalToWinLay" >totalToWinLay</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#reset" >reset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#update" >update</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(commission: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="269" class="link-to-prism">src/app/model/calculator/ladder.ts:269</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>commission</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="avgOddsBack"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>avgOddsBack</b></span>
                        <a href="#avgOddsBack"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="257" class="link-to-prism">src/app/model/calculator/ladder.ts:257</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="avgOddsLay"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>avgOddsLay</b></span>
                        <a href="#avgOddsLay"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="258" class="link-to-prism">src/app/model/calculator/ladder.ts:258</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="breakEvenOdds"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>breakEvenOdds</b></span>
                        <a href="#breakEvenOdds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="268" class="link-to-prism">src/app/model/calculator/ladder.ts:268</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="commission"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>commission</b></span>
                        <a href="#commission"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="267" class="link-to-prism">src/app/model/calculator/ladder.ts:267</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="netBack"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>netBack</b></span>
                        <a href="#netBack"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="264" class="link-to-prism">src/app/model/calculator/ladder.ts:264</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="netLay"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>netLay</b></span>
                        <a href="#netLay"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="265" class="link-to-prism">src/app/model/calculator/ladder.ts:265</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="rating"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>rating</b></span>
                        <a href="#rating"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="269" class="link-to-prism">src/app/model/calculator/ladder.ts:269</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalBackStake"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>totalBackStake</b></span>
                        <a href="#totalBackStake"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="259" class="link-to-prism">src/app/model/calculator/ladder.ts:259</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalCommission"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>totalCommission</b></span>
                        <a href="#totalCommission"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="266" class="link-to-prism">src/app/model/calculator/ladder.ts:266</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalLayBank"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>totalLayBank</b></span>
                        <a href="#totalLayBank"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="260" class="link-to-prism">src/app/model/calculator/ladder.ts:260</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalLayLiability"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>totalLayLiability</b></span>
                        <a href="#totalLayLiability"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="261" class="link-to-prism">src/app/model/calculator/ladder.ts:261</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalToWinBack"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>totalToWinBack</b></span>
                        <a href="#totalToWinBack"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="262" class="link-to-prism">src/app/model/calculator/ladder.ts:262</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalToWinLay"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Optional</span>
                        <span ><b>totalToWinLay</b></span>
                        <a href="#totalToWinLay"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="263" class="link-to-prism">src/app/model/calculator/ladder.ts:263</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="reset"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>reset</b></span>
                        <a href="#reset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>reset()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="287"
                            class="link-to-prism">src/app/model/calculator/ladder.ts:287</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>update</b></span>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>update(ladder: LadderLevel[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="301"
                            class="link-to-prism">src/app/model/calculator/ladder.ts:301</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ladder</td>
                                    <td>
                                            <code>LadderLevel[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">const LADDERS &#x3D; 1000
const INCREMENTAL &#x3D; [
  {min:1,max: 1.99,size:0.01},
  {min:2,max: 2.98,size:0.02},
  {min:3,max: 3.95,size:0.05},
  {min:4,max: 5.90,size:0.1},
  {min:6,max: 9.80,size:0.2},
  {min:10,max: 19.5,size:0.5},
  {min:20,max: 49,size:1},
  {min:50,max: 95,size:5},
  {min:100,max: 1000,size:10},
]

export class Ladder {

  public ladder?: LadderLevel[] &#x3D; []
  public ladderEntry?: LadderEntry
  public commission
  public ladderResume: LadderResume
  public breakEvenOdds: number

  constructor(commission: number) {

    this.ladderEntry &#x3D; new LadderEntry()
    this.ladderResume &#x3D; new LadderResume(commission)
    this.commission&#x3D;0.02
    let j&#x3D;0
    let i&#x3D;1.01
    let lastIncremental&#x3D;0
    let margin &#x3D; 0.001
    let tickCount &#x3D; 0

    while (i&lt;&#x3D;LADDERS) {
      j&#x3D;0
      while(j&lt;INCREMENTAL.length){
        if(i&gt;&#x3D;(INCREMENTAL[j].min-margin) &amp;&amp; i&lt;&#x3D;(INCREMENTAL[j].max+margin)){
          this.ladder.push(new LadderLevel(i,tickCount))
          tickCount++
          i &#x3D; +(i+ INCREMENTAL[j].size).toFixed(2)
          lastIncremental &#x3D; INCREMENTAL[j].size
          break
        } else if(j&#x3D;&#x3D;&#x3D;INCREMENTAL.length-1) {
          i &#x3D; i+lastIncremental
        }
        j++;
      }
    }
  }

   public resetLadder(){
      let tempLadder &#x3D; []
      let j&#x3D;0
      let i&#x3D;1.01
      let lastIncremental&#x3D;0
      let margin &#x3D; 0.001
      let tickCount &#x3D; 0

      while (i&lt;&#x3D;LADDERS) {
        j&#x3D;0
        while(j&lt;INCREMENTAL.length){
          if(i&gt;&#x3D;(INCREMENTAL[j].min-margin) &amp;&amp; i&lt;&#x3D;(INCREMENTAL[j].max+margin)){
            tempLadder.push(new LadderLevel(i,tickCount))
            tickCount++
            i &#x3D; +(i+ INCREMENTAL[j].size).toFixed(2)
            lastIncremental &#x3D; INCREMENTAL[j].size
            break
          } else if(j&#x3D;&#x3D;&#x3D;INCREMENTAL.length-1) {
            i &#x3D; i+lastIncremental
          }
          j++;
        }
      }
      this.ladder &#x3D; tempLadder
  }

  public calculateBEOdd(){
    let state
    let checkState
    state &#x3D; this.ladder[0].whatIf &gt; 0;
    for (let cell of this.ladder){
      checkState &#x3D; cell.whatIf &gt; 0;
      if(checkState!&#x3D;state){
        this.breakEvenOdds&#x3D;cell.odds
        break
      }
    }
  }

}


export class LadderLevel {

  public odds?: number
  public probability?: number
  public ticksUp?: number
  public ticksDown?: number
  public backSide?: LadderLevelBackSide
  public laySide?: LadderLevelLaySide
  public whatIf?: number
  public whatIfStake?: number
  public whatIfBack: boolean

  constructor(i:number, count: number) {

    this.odds &#x3D; i;
    this.probability &#x3D; (1/(this.odds))
    this.ticksUp &#x3D; LADDERS-count
    this.ticksDown &#x3D; count
    this.backSide&#x3D; new LadderLevelBackSide(i)
    this.laySide&#x3D; new LadderLevelLaySide(i)
    this.whatIf&#x3D; 0
    this.whatIfStake&#x3D; 0
    this.whatIfBack&#x3D; false
  }

  public updateWhatIfLevel(resume: LadderResume){

    this.whatIf&#x3D;0
    this.whatIfStake&#x3D; 0

    if(resume.totalBackStake&gt;0 || resume.totalLayBank &gt; 0){

      if(resume.avgOddsBack&gt;0){
        // i have to lay
        if(((resume.avgOddsBack*resume.totalBackStake)/this.odds)-resume.totalBackStake&gt;0){

          this.whatIf &#x3D; this.whatIf + ((((resume.avgOddsBack*resume.totalBackStake)/this.odds)-resume.totalBackStake)*(1-resume.commission))
        } else {

          this.whatIf &#x3D; this.whatIf + ((((resume.avgOddsBack*resume.totalBackStake)/this.odds)-resume.totalBackStake))
        }
        this.whatIfStake&#x3D;this.whatIfStake+((resume.avgOddsBack*resume.totalBackStake)/this.odds)
      }
      if(resume.avgOddsLay&gt;0){

        if(resume.totalLayBank-((resume.avgOddsLay*resume.totalLayBank)/this.odds)&gt;0){

          this.whatIf &#x3D; this.whatIf -((((resume.avgOddsLay*resume.totalLayBank)/this.odds)-resume.totalLayBank)*(1-resume.commission))
        } else {

          this.whatIf &#x3D; this.whatIf -((((resume.avgOddsLay*resume.totalLayBank)/this.odds)-resume.totalLayBank))
        }
        this.whatIfStake&#x3D;this.whatIfStake-((resume.avgOddsLay*resume.totalLayBank)/this.odds)

      }

    } else {
      this.whatIf &#x3D;0
    }
  }
}

export class LadderLevelBackSide{

  public odds?: number
  public stake?: number
  public toWin?: number

  constructor(odds: number) {
    this.stake&#x3D;0
    this.toWin&#x3D;0
    this.odds &#x3D; odds
  }

  public addStake(stake: number){
    this.stake &#x3D; this.stake +stake
    this.updateToWinLevel()
  }

  public removeStake(stake: number){
    if(this.stake -stake&gt;&#x3D;0){
      this.stake &#x3D; this.stake -stake
    } else {
      this.stake &#x3D;0
    }
    this.updateToWinLevel()
  }

  public resetStake(){
    this.stake &#x3D; 0
    this.updateToWinLevel()
  }

  private updateToWinLevel(){
    if(this.stake!&#x3D;0){
      this.toWin &#x3D; this.odds*this.stake-this.stake
    } else {
      this.toWin&#x3D;0
    }
  }

}

export class LadderLevelLaySide{


  public odds?: number
  public bank?: number
  public liability?: number
  public toWin?: number


  constructor(odds: number) {
    this.bank&#x3D;0
    this.toWin&#x3D;0
    this.odds &#x3D; odds
  }

  public addBank(bank: number){
    this.bank &#x3D; this.bank +bank
    this.updateToWinLevel()
  }

  public removeBank(bank: number){
    if(this.bank -bank&gt;&#x3D;0){
      this.bank &#x3D; this.bank -bank
    } else {
      this.bank &#x3D;0
    }
    this.updateToWinLevel()
  }

  public resetBank(){
    this.bank &#x3D; 0
    this.updateToWinLevel()
  }

  private updateToWinLevel(){
    if(this.bank!&#x3D;0){
      this.toWin &#x3D; this.bank
      this.liability &#x3D; this.bank*this.odds-this.bank
    } else {
      this.toWin&#x3D;0
      this.liability&#x3D;0
    }
  }

}

export class LadderEntry{

  public mainStakeBack?: number
  public mainBankLay?: number
  public mainLiabilityLay?: number

  constructor() {

    this.mainBankLay &#x3D;10
    this.mainLiabilityLay &#x3D;0
    this.mainStakeBack &#x3D;10
  }
}

export class LadderResume{

  public avgOddsBack?: number
  public avgOddsLay?: number
  public totalBackStake?: number
  public totalLayBank?: number
  public totalLayLiability?: number
  public totalToWinBack?: number
  public totalToWinLay?: number
  public netBack?: number
  public netLay?: number
  public totalCommission?: number
  public commission?:number
  public breakEvenOdds?: number
  public rating?:number

  constructor(commission: number) {

    this.avgOddsBack&#x3D;0
    this.avgOddsLay&#x3D;0
    this.totalBackStake&#x3D;0
    this.totalLayLiability&#x3D;0
    this.totalLayBank&#x3D;0
    this.totalToWinBack &#x3D;0
    this.totalToWinLay&#x3D;0
    this.netBack &#x3D;0
    this.netLay&#x3D;0
    this.totalCommission&#x3D;0
    this.commission&#x3D;commission
    this.breakEvenOdds&#x3D;0
    this.rating&#x3D;0
  }
  private reset(){
    this.avgOddsBack&#x3D;0
    this.avgOddsLay&#x3D;0
    this.totalBackStake&#x3D;0
    this.totalLayLiability&#x3D;0
    this.totalLayBank&#x3D;0
    this.totalToWinBack &#x3D;0
    this.totalToWinLay&#x3D;0
    this.netBack &#x3D;0
    this.netLay&#x3D;0
    this.totalCommission&#x3D;0
    this.rating&#x3D;0
  }

  public update(ladder: LadderLevel[]){
    this.reset()

    let countBack &#x3D;0
    let backOddsSum &#x3D;0
    let countLay &#x3D;0
    let layOddsSum &#x3D;0

    for (let ladderCell of ladder){
      // to win
      this.totalToWinLay&#x3D; this.totalToWinLay + ladderCell.backSide.toWin
      this.totalToWinBack&#x3D; this.totalToWinBack + ladderCell.laySide.toWin

      // loss
      this.totalBackStake &#x3D; this.totalBackStake+ ladderCell.backSide.stake
      this.totalLayBank &#x3D; this.totalLayBank+ ladderCell.laySide.bank

      // odds
      //back
      if(ladderCell.backSide.stake&gt;0){
        backOddsSum &#x3D; backOddsSum + ladderCell.backSide.stake*ladderCell.backSide.odds
        countBack++
      }
      //lay
      if(ladderCell.laySide.bank&gt;0){
        layOddsSum &#x3D; layOddsSum +(ladderCell.laySide.bank*ladderCell.laySide.odds)
        countLay++
      }
    }
    this.avgOddsBack &#x3D; backOddsSum/this.totalBackStake
    this.avgOddsLay &#x3D; layOddsSum/this.totalLayBank

    // liability for lay side
    if(this.totalLayBank!&#x3D;0){
      this.totalLayLiability &#x3D; this.totalLayBank*this.avgOddsLay-this.totalLayBank
    } else {
      this.totalLayLiability&#x3D;0
    }

    // calculate net
    this.netBack &#x3D; -this.totalBackStake+this.totalToWinBack
    this.netLay &#x3D; -this.totalLayLiability+this.totalToWinLay

    // calculate r/R

    if(this.netBack&gt;0 &amp;&amp; this.netLay&lt;0){
      this.rating&#x3D;Math.abs(this.netBack/this.netLay)
    } else if(this.netBack&lt;0 &amp;&amp; this.netLay&gt;0) {
      this.rating&#x3D;Math.abs(this.netLay/this.netBack)
    } else {
      this.rating&#x3D;0
    }


    // check commission
    if(this.netBack&gt;0){

      this.totalCommission &#x3D; this.netBack*this.commission
      this.netBack &#x3D; this.netBack-this.totalCommission
    } else if(this.netLay&gt;0) {

      this.totalCommission &#x3D; this.netLay*this.commission
      this.netLay &#x3D; this.netLay-this.totalCommission
    } else {
      this.totalCommission&#x3D;0
    }

  }
}

</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'LadderResume.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
