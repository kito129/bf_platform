
<div class="d-flex justify-content-between align-items-center flex-wrap grid-margin">
  <div>
    <h4 class="mb-3 mb-md-0">Tennis Market Advanced</h4>
  </div>
  <div class="d-flex align-items-center flex-wrap text-nowrap">

    <button type="button" class="btn btn-outline-success btn-icon mr-2 d-none d-md-block" (click)="getData()">
      <i class="btn-icon-prepend" data-feather="download-cloud" appFeatherIcon></i>
      Get Data
    </button>
  </div>
</div>

<!-- BREADCRUMB -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a routerLink="/">BF</a></li>
    <li class="breadcrumb-item"><a routerLink="/market/list">Tennis Market Advanced</a></li>
    <li class="breadcrumb-item active" aria-current="page">List</li>
  </ol>
</nav>
<!-- /BREADCRUMB -->

<!-- ROW 1-->
<div class="col-12">
  <!-- LIST COMPONENT-->

  <app-loading-cards *ngIf="($isLoadingMetalist | async).isLoading"></app-loading-cards>
  <div *ngIf="($isLoadingMetalist | async).isLoadingSuccess">

    <!-- NAME FILTER -->
    <div class="d-flex justify-content-end align-items-baseline">
      <form class="forms-sample grid-margin" #searchForm="ngForm">
        <div class="row">
          <input
            class="form-control"
            type="text"
            placeholder="Type name..."
            (keyup)="updateNameFilter($event)"
          />
        </div>
      </form>
    </div>

    <!-- DATATABLE -->
    <ngx-datatable
      class="dark"
      [rows]="rows"
      [columnMode]="ColumnMode.flex"
      [headerHeight]="40"
      [footerHeight]="50"
      [limit]="20"
      rowHeight="50"
      [sorts]="[{prop: 'marketInfo.marketInfo.metadata.inPlayTime', dir: 'desc'}]">

      <ngx-datatable-column name="Date" prop="marketInfo.marketInfo.metadata.inPlayTime" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h5>
            {{ value | date:'shortDate' }}
          </h5>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Winner" prop="marketRunners.runnerWinner.name" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value.toLowerCase().indexOf(filterName)!==-1 && filterName !=='' ? 'text-warning' :''">
            {{value}}
          </h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Loser" prop="marketRunners.runnerLoser.name" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value.toLowerCase().indexOf(filterName)!==-1 && filterName !=='' ? 'text-warning' :''">
            {{value}}
          </h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Duration" prop="marketInfo.marketInfo.metadata.inPlayDuration" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value >=2400000 && value <14400000  ? 'text-success' : 'text-danger'">{{ value | secAndMinute }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Winner BSP" prop="marketRunners.runnerWinner.inPlayOdds" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6>{{value}}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Loser BSP" prop="marketRunners.runnerLoser.inPlayOdds" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6>{{value}}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="correctSuspended" prop="marketInfo.marketInfo.metadata.correctSuspended"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value ? 'text-success' : 'text-danger'">{{ value }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="runnersCorrectBSP" prop="marketInfo.marketInfo.metadata.runnersCorrectBSP"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value >=2 ? 'text-success' : value ===1 ? 'text-warning' : 'text-danger'">{{ value }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="haveAdditional" prop="marketAdditionalInfo"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value ? 'text-success': 'text-danger'">{{ value ? "true" : "false" }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="prematchVolume" prop="marketInfo.marketInfo.volume.preMatch"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6>{{ value | currency }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="volume" prop="marketInfo.marketInfo.volume.total"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6>{{ value | currency }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="runnersPrematchNumberOdds" prop="marketInfo.marketInfo.metadata.prematchNumberOddsNumber"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value >=20 ? 'text-success' : 'text-danger'">{{ value }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="runnersInPlayNumberOdds" prop="marketInfo.marketInfo.metadata.inplayNumberOddsNumber"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value >=50 ? 'text-success' : 'text-danger'">{{ value }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="numberInPlayUpdate" prop="marketInfo.marketInfo.metadata.inplayUpdatesNumber"  [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <h6 [ngClass]="value ==3 ? 'text-success' : (value >3 && value <=7) || value == 2 ? 'text-warning' : 'text-danger'">{{ value }}</h6>
        </ng-template>
      </ngx-datatable-column>

      <!-- DETAIL BUTTONS-->
      <ngx-datatable-column name="Detail" prop="" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>

          <app-market-details-modal [isBasic]="true"
                                    [marketId]="value.marketInfo.marketInfo.id">
          </app-market-details-modal>


        </ng-template>

      </ngx-datatable-column>


    </ngx-datatable>
  </div>
</div>

<!--
  <div>
    <app-market-advanced-metalist-stats [metalistStats]="$metalistStats | async"></app-market-advanced-metalist-stats>
  </div>

-->





