<div class="d-flex justify-content-between align-items-center flex-wrap grid-margin">
  <div>
    <h4 class="mb-3 mb-md-0">Report</h4>
    <p>Report </p>
  </div>
  <div class="d-flex align-items-center flex-wrap text-nowrap">
    <button type="button" class="btn btn-outline-info btn-icon-text mr-2 d-none d-md-block" (click)="refresh()">
      <i class="btn-icon-prepend" data-feather="refresh-ccw" appFeatherIcon></i>
      Refresh
    </button>
  </div>
</div>

<!-- BREADCRUMB -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a routerLink="/">BF</a></li>
    <li class="breadcrumb-item"><a routerLink="/report">Report</a></li>
    <li class="breadcrumb-item active" aria-current="page">Main</li>
  </ol>
</nav>
<!-- /BREADCRUMB -->

<div class="col">
  <ul ngbNav #defaultNav="ngbNav" [(activeId)]="defaultNavActiveId" class="nav-tabs">

    <li [ngbNavItem]="1">
      <h5>
        <a ngbNavLink>New Report</a>
      </h5>
      <ng-template ngbNavContent>

        <div class="col grid-margin">
          <app-loading-cards *ngIf="(isLoadingAllStrategy$ | async).isLoading || (isLoadingAllNewTrade$ | async).isLoading"></app-loading-cards>
          <app-strategy-datatable *ngIf="(isLoadingAllStrategy$ | async).isLoadingSuccess && (isLoadingAllNewTrade$ | async).isLoadingSuccess"
                                  [strategyDatatable]="strategyDatatable$ | async"
                                  [selectedStrategyId]="selectedStrategyId$ | async">
          </app-strategy-datatable>
        </div>

        <div class="col grid-margin">
          <app-loading-cards *ngIf="(isLoadingAllStrategy$ | async).isLoading|| (isLoadingAllTrade$ | async).isLoading"></app-loading-cards>
          <app-strategy-report *ngIf="(selectedStrategy$ | async)"
                               [selectedStrategyReport]="selectedStrategyReport"
                               [selectedStrategyPie]="selectedStrategyPie"
                               [selectedStrategyTrades$]="selectedStrategyTrades$">
          </app-strategy-report>
        </div>

      </ng-template>
    </li>

    <li [ngbNavItem]="2">
      <h5>
        <a ngbNavLink>All Trades</a>
      </h5>
      <ng-template ngbNavContent>

        <div class="col-12">
          <div class="col grid-margin">
            <app-loading-cards *ngIf="(isLoadingAllTrade$ | async).isLoading"></app-loading-cards>
            <app-trade-datatable *ngIf="(isLoadingAllTrade$ | async).isLoadingSuccess"
                                 [trades$]="allTrade$"
                                 [showDuplicate]="true"
                                 [pageNumber]="currentPageSelected"
                                 (pageEmitter)="setPageNUmber($event)">
            </app-trade-datatable>
          </div>

          <div class="col grid-margin">
            <app-loading-cards *ngIf="(isLoadingAllTrade$ | async).isLoading"></app-loading-cards>
            <app-trade-equity *ngIf="(isLoadingAllTrade$ | async).isLoadingSuccess"
                              [allTrades]="allTrade$ | async"
                              [labels]="allTradesLabels"
                              [wantBar]="true">

            </app-trade-equity>
          </div>

          <div class="col grid-margin">
            <app-loading-cards *ngIf="(isLoadingAllTrade$ | async).isLoading"></app-loading-cards>
            <app-trade-dd *ngIf="(isLoadingAllTrade$ | async).isLoadingSuccess"
                          [allTrades]="allTrade$ | async"
                          [labels]="allTradesLabels">

            </app-trade-dd>
          </div>
        </div>
      </ng-template>
    </li>
    <li [ngbNavItem]="3">
      <h5>
        <a ngbNavLink>Strategy</a>
      </h5>
      <ng-template ngbNavContent>

        <div class="col-12">

          <div class="col grid-margin">
            <app-loading-cards *ngIf="(isLoadingAllStrategy$ | async).isLoading|| (isLoadingAllTrade$ | async).isLoading"></app-loading-cards>
            <app-strategy-report *ngIf="(isLoadingAllStrategy$ | async).isLoadingSuccess
                                && (isLoadingAllTrade$ | async).isLoadingSuccess
                                && visibleReport
                                && (selectedStrategy$ | async)"
                                 [selectedStrategyReport]="selectedStrategyReport"
                                 [selectedStrategyPie]="selectedStrategyPie"
                                 [selectedStrategyTrades$]="selectedStrategyTrades$">
            </app-strategy-report>
          </div>

          <div class="col grid-margin">
            <app-loading-cards *ngIf="(isLoadingAllStrategy$ | async).isLoading"></app-loading-cards>
            <app-strategy-datatable *ngIf="(isLoadingAllStrategy$ | async).isLoadingSuccess"
                                    [strategyDatatable]="strategyDatatable$ | async"
                                    [selectedStrategyId]="selectedStrategyId$ | async">
            </app-strategy-datatable>
          </div>
        </div>
      </ng-template>
    </li>

    <li [ngbNavItem]="4">
      <h5>
        <a ngbNavLink>Strategy Uploader</a>
      </h5>
      <ng-template ngbNavContent>
        <div class="col-12">
          <app-strategy-uploader-main></app-strategy-uploader-main>
        </div>
      </ng-template>
    </li>

  </ul>

  <div [ngbNavOutlet]="defaultNav" class="border border-top-0 p-3"></div>
</div>



