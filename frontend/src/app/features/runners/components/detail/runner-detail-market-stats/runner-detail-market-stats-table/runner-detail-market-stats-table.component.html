<!-- CARD 1-->
<div class="card mt-2">
  <!-- HEADER -->
  <div class="card-header">
    <div class="d-flex justify-content-between align-items-baseline">
      <h3>{{marketStats.odds.name}}</h3>
    </div>
  </div><!-- /HEADER -->
  <div class="card-body">
    <div class="col">

      <ul class="list-group">
        <li class="list-group-item active">
          <div class="d-flex justify-content-around align-items-baseline">
            <h4>#: {{marketStats.match.matchNumber}} ({{ marketStats.match.matchNumber / totalMatch | percent}})</h4>
            <h3>Win: {{marketStats.match.winner}}</h3>
            <h3>Loss: {{marketStats.match.loser}} </h3>
            <h3>Win Rate: {{ marketStats.match.winner / marketStats.match.matchNumber | percent}}</h3>
            <button type="button" [ngClass]="isCollapsed? 'btn btn-outline-dark' : 'btn btn-dark'"
                    (click)="isCollapsed = !isCollapsed">
              View
            </button>
          </div>
        </li>
        <!-- DATATABLE -->
        <li class="list-group-item" [ngbCollapse]="isCollapsed">
          <ngx-datatable
            class="dark material-stripped"
            [rows]="marketStats.marketsInfo"
            [columnMode]="ColumnMode.flex"
            [headerHeight]="40"
            [footerHeight]="50"
            [limit]="30"
            rowHeight="50"
            [sorts]="[{prop: 'openDate', dir: 'desc'}]">

            <ngx-datatable-column name="Date" prop="openDate" [flexGrow]="1">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <h5>
                  {{ value | date:'shortDate' }}
                </h5>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Name" prop="eventName" [flexGrow]="3">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <h5>
                  {{ value}}
                </h5>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Winner" prop="winner.id" [flexGrow]="1">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <h5 *ngIf="+value === +runnerId">
                  <i data-feather="check" appFeatherIcon class="text-success"></i>
                </h5>
                <h5 *ngIf="+value !== +runnerId">
                  <i data-feather="x" appFeatherIcon class="text-danger"></i>
                </h5>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Selection BSP" prop="selection.bsp" [flexGrow]="1">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <app-bsp-odd [bspOdd]="value"></app-bsp-odd>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Selection Max" prop="selection.maxInPlay" [flexGrow]="1">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <p class="text-primary">{{value}}</p>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Selection min" prop="selection.minInPlay" [flexGrow]="1">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <p class="text-danger">{{value}}</p>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Detail" prop="marketId" [flexGrow]="1">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <app-market-details-modal [isBasic]="true"
                                          [marketId]="value">
                </app-market-details-modal>
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>

        </li>
      </ul>
    </div>
  </div>

</div>
