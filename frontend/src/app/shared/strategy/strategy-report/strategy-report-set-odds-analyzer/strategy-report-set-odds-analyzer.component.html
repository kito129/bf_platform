<!-- DATATABLE BUTTON -->
<div class="d-flex justify-content-end align-items-center">
  <form class="form-group grid-margin">
    <div class="row ">
      <div class="col">
        <div class="form-group">
          <label for="name">Find by Name</label>
          <input
            class="form-control"
            type="text"
            id="name"
            placeholder="Type name..."
            [(ngModel)]="search"
            name="search"
            (ngModelChange)="updateFilter()"/>
        </div>
      </div>
      <div class="col">
        <div class="form-group">
          <!-- OPTIONS -->
          <label for="tableSize">Table size</label>
          <ng-select id="tableSize"
                     name="options"
                     [(ngModel)]="tableSize"
                     [items]="[5, 10,15,20,25,30,40,50,100,200,250,500,1000]"
                     [clearable]="false">
          </ng-select>
        </div>
      </div>
    </div>
  </form>
  <h4> Selected: {{selected.length}}</h4>
  <button type="button" class="btn btn-outline-light btn-icon-text ml-2 d-none d-md-block" (click)="saveAsCSV()">
    <i class="btn-icon-prepend" data-feather="download" appFeatherIcon></i>
    Download
  </button>
</div>

<!-- DATA TABLE -->
<ngx-datatable
  *ngIf="okValue"
  class="dark"
  [rows]="rows"
  [columnMode]="ColumnMode.force"
  [rowHeight]="'auto'"
  [headerHeight]="40"
  [footerHeight]="50"
  [reorderable]="true"
  [limit]="tableSize"
  [scrollbarH]="true"
  [selected]="selected"
  [selectionType]="SelectionType.multiClick"
  (select)="onSelect($event)"
  [sorts]="[{prop: 'date', dir: 'desc'}]">

  <ngx-datatable-column name="Date" prop="date">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value | date:'shortDate'}}</h5>
    </ng-template>
  </ngx-datatable-column>

  <!-- RESULT -->
  <ngx-datatable-column name="ResultA" prop="result.set1.runnerA" width="25">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="ResultB" prop="result.set1.runnerB" width="25">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="ResultA" prop="result.Set1.runnerA" width="25">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="ResultB" prop="result.Set1.runnerB" width="25">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="ResultA" prop="result.set3.runnerA" width="25">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="ResultB" prop="result.set3.runnerB" width="25">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Name" prop="marketName">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value}}</h5>
    </ng-template>
  </ngx-datatable-column>




  <!-- BSP -->
  <ngx-datatable-column name="Bsp A" prop="runnerA.bsp">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <app-bsp-odd [bspOdd]="value"></app-bsp-odd>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Bsp B" prop="runnerB.bsp">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <app-bsp-odd [bspOdd]="value"></app-bsp-odd>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Winner I" prop="runnerA.winSet1">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h4 *ngIf="value" class="text-danger">A</h4>
      <h4 *ngIf="!value" class="text-primary">B</h4>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Winner II" prop="runnerA.winSet3">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h4 *ngIf="value" class="text-danger">A</h4>
      <h4 *ngIf="!value" class="text-primary">B</h4>
    </ng-template>
  </ngx-datatable-column>

  <!-- RUNNER A -->
  <ngx-datatable-column name="Set1 A" prop="runnerA.Set1">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h4>{{value}}</h4>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Set1 A Notional" prop="runnerA.Set1Notional">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h4 class="text-warning">{{value}}</h4>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Set1 A Notional Delta" prop="runnerA.Set1NotionalDelta">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5 [ngClass]="value<limitSuccessMax && value>limitSuccessMin ? 'text-success' : 'text-danger'">{{value | number:'0.2'}}</h5>
    </ng-template>
  </ngx-datatable-column>

  <!-- RUNNER B -->
  <ngx-datatable-column name="Set1 B" prop="runnerB.Set1">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h4>{{value}}</h4>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Set1 B Notional" prop="runnerB.Set1Notional">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h4 class="text-warning">{{value}}</h4>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Set1 B Notional Delta" prop="runnerB.Set1NotionalDelta">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5 [ngClass]="value<limitSuccessMax && value>limitSuccessMin ? 'text-success' : 'text-danger'">{{value | number:'0.2'}}</h5>
    </ng-template>
  </ngx-datatable-column>


  <!--view trade -->
  <ngx-datatable-column name="View" prop="trade">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <app-trade-and-market-details-modal [trade]="value">
      </app-trade-and-market-details-modal>
    </ng-template>
  </ngx-datatable-column>
</ngx-datatable>

<!-- CHARTS
<app-columns-chart [title]="['BSP', 'Odds', 'Notional', 'Delta']"
                   [isPercent]="false"
                   [isCurrency]="false"
                   [labels]="labelsMarketName"
                   [height]="650"
                   [colors]="['#ffffff', '#3aff24', '#dc8619', '#e50a55']"
                   [wantStacked]="false"
                   [seriesData]="[winnerSetBsp,winnerSetOdds,winnerSetNotional,winnerSetNotionalDelta]">
</app-columns-chart>
-->


<!--  TABLE
<div class="table-responsive">
  <table class="table table-hover table-striped table-bordered text-white">
    <thead>
    <tr>
      <th><h4>Date</h4></th>
      <th><h4>Name</h4></th>
      <th><h4>Result</h4></th>
      <th><h4>BspA</h4></th>
      <th><h4>BspB</h4></th>
      <th><h4>Winner Set 2</h4></th>
      <th><h4>Set1 A</h4></th>

      <th><h4>Set1 A Notional</h4></th>
      <th><h4>Set1 A Delta</h4></th>
      <th><h4>Set1 B</h4></th>

      <th><h4>Set1 B Notional</h4></th>
      <th><h4>Set1 B Delta</h4></th>
    </tr>
    </thead>
    <tbody class="text-white">
    <tr *ngFor=" let trade of analyzer">
      <td><h4>{{trade.date | date:"shortDate"}}</h4></td>
      <td><h4>{{trade.marketName}}</h4></td>
      <td><h4>{{trade.result | tennisPoint }}</h4></td>
      <td>
        <app-odds-implicit [odds]="trade.runnerA.bsp"></app-odds-implicit>
      </td>
      <td>
        <app-odds-implicit [odds]="trade.runnerB.bsp"></app-odds-implicit>
      </td>
      <td><h4 [ngClass]="trade.runnerA.winSet1 ? 'text-danger' :  'text-primary'">{{trade.runnerA.winSet1 ? 'A' : 'B'}}</h4></td>
      <td>
        <app-odds-implicit [odds]="trade.runnerA.Set1"></app-odds-implicit>
      </td>
      <td>
        <app-odds-implicit [odds]="trade.runnerA.Set1Notional"></app-odds-implicit>
      </td>
      <td>
        <h5 [ngClass]="0.25<trade.runnerA.Set1Delta && 0.45>trade.runnerA.Set1Delta ? 'text-success' : 'text-danger'">
          {{trade.runnerA.Set1Delta | percent}}
        </h5>
      </td>
      <td>
        <app-odds-implicit [odds]="trade.runnerB.Set1"></app-odds-implicit>
      </td>
      <td>
        <app-odds-implicit [odds]="trade.runnerB.Set1Notional"></app-odds-implicit>
      </td>
      <td>
        <h5 [ngClass]="0.25<trade.runnerB.Set1Delta && 0.45>trade.runnerB.Set1Delta ? 'text-success' : 'text-danger'">
          {{trade.runnerB.Set1Delta | percent}}
        </h5>
      </td>
    </tr>
    </tbody>
  </table>
</div>
-->

