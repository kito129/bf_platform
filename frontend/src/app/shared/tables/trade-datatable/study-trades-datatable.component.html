<div class="d-flex justify-content-end align-items-baseline">
  <form class="form-group grid-margin" #searchForm="ngForm">
    <div class="form-group">
      <input
        class="form-control"
        type="text"
        placeholder="Type name..."
        (keyup)="updateFilter($event)"
      />
    </div>
    <div class="form-group">
      <!-- OPTIONS -->
      <label for="tabelSize">Table size</label>
      <ng-select id="tabelSize"
                 name="options"
                 [(ngModel)]="tableSize"
                 [items]="[5, 10,15,20,25,30,40,50,100,1000]"
                 [clearable]="false">
      </ng-select>
    </div>
  </form>
</div>

<ngx-datatable
  class="dark expandable"
  [rows]="rows"
  [loadingIndicator]="loadingIndicator"
  [columnMode]="ColumnMode.force"
  [rowHeight]="50"
  [headerHeight]="40"
  [footerHeight]="50"
  [limit]="tableSize"
  [reorderable]="true"
  [sorts]="[{prop: 'trade.trade.info.date', dir: 'desc'}]">

  <ngx-datatable-column name="Date" prop="trade.trade.info.date">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value | date:'shortDate'}}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Name" prop="trade.trade.info.marketInfo.marketName">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5>{{ value }}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="PL" prop="trade.trade.results.netProfit">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5 [ngClass]="value>0? 'text-success' : 'text-danger'">{{ value | currency }}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Stock" prop="data.stockPl">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5 [ngClass]="value>0? 'text-success' : 'text-danger'">{{ value | currency }}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Risk" prop="trade.trade.results.maxRisk">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5 class="text-warning">{{ value | currency }}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="rR" prop="trade.trade.results.rr">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <h5 class="text-info">{{ value | percent: '.2' }}</h5>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="View" prop="">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <app-trade-and-market-details-modal [trade]="value.trade">

      </app-trade-and-market-details-modal>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Tolls" prop="" *ngIf="viewSelectors">
    <ng-template let-value="value"  ngx-datatable-cell-template>

      <div class="d-flex justify-content-end align-items-baseline">

        <button type="button" class="btn btn-icon" [ngClass]="selectedMarketId === value.trade.trade.info.marketInfo.marketId ? 'btn-info' : 'btn-outline-info'"
                (click)="onClick(value.trade.trade.info.marketInfo.marketId,
                value.trade.trade.selections[0].avg.back.odds>0 || value.trade.trade.selections[0].avg.lay.odds>0 ? value.trade.trade.selections[0].runnerId : value.trade.trade.selections[1].runnerId, value.trade)">
          <i class="feather icon-eye"></i>
        </button>
      </div>

    </ng-template>
  </ngx-datatable-column>

</ngx-datatable>
